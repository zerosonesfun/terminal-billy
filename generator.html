<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Code Generator</title>
</head>

<body>
  <form id="generator-form">
    <label for="userInputEndsWith">userInput.endsWith:</label>
    <input type="text" id="userInputEndsWith" name="userInputEndsWith"><br>

    <label for="allowedCommands">!allowedCommands.includes(command):</label>
    <input type="text" id="allowedCommands" name="allowedCommands"><br>

    <label for="plainTextError">Error message for not plain text:</label>
    <input type="text" id="plainTextError" name="plainTextError"><br>

    <label for="additionalJokes">Additional jokes for 'jk' command (separated by commas):</label>
    <input type="text" id="additionalJokes" name="additionalJokes"><br>

    <label for="customNames">Custom names for 'who' command (separated by commas):</label>
    <input type="text" id="customNames" name="customNames"><br>

    <label for="customDescriptions">Descriptions for custom names (separated by commas):</label>
    <input type="text" id="customDescriptions" name="customDescriptions"><br>

    <label for="customPageSlugs">Custom page slugs for 'ls pages' command (separated by commas):</label>
    <input type="text" id="customPageSlugs" name="customPageSlugs"><br>

    <label for="customAvailableNames">Custom names for 'ls who' command (separated by commas):</label>
    <input type="text" id="customAvailableNames" name="customAvailableNames"><br>

    <button type="button" onclick="generateCode()">Generate Code</button>
  </form>

  <textarea id="generated-code" rows="10" cols="80" readonly></textarea>

  <script>
    function generateCode() {
      var userInputEndsWith = document.getElementById('userInputEndsWith').value;
      var allowedCommands = document.getElementById('allowedCommands').value.split(',').map(command => command.trim());
      var plainTextError = document.getElementById('plainTextError').value;
      var additionalJokes = document.getElementById('additionalJokes').value.split(',').map(joke => joke.trim());
      var customNames = document.getElementById('customNames').value.split(',').map(name => name.trim());
      var customDescriptions = document.getElementById('customDescriptions').value.split(',').map(description => description.trim());
      var customPageSlugs = document.getElementById('customPageSlugs').value.split(',').map(slug => slug.trim());
      var customAvailableNames = document.getElementById('customAvailableNames').value.split(',').map(name => name.trim());

      var codeTemplate = `<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>\${pageTitle}</title>
  <style>
    /* CSS styles here */
  </style>
</head>
<body>
  <div class="terminal-container">
    <pre class="terminal-output"></pre>
    <input type="text" class="terminal-input" autofocus>
  </div>

  <script>
    var terminalOutput = document.querySelector('.terminal-output');
    var terminalInput = document.querySelector('.terminal-input');
    var commandsHistory = [];
    var currentCommandIndex = 0;
    var jokesIndex = 0;

    function printOutput(text) {
      terminalOutput.textContent += text + '\\n';
      terminalOutput.scrollTop = terminalOutput.scrollHeight;
    }

    function processCommand() {
      var command = terminalInput.value.trim();
      terminalInput.value = '';

      if (command === '') {
        return;
      }

      commandsHistory.push(command);
      currentCommandIndex = commandsHistory.length;

      if (command === 'jk') {
        var joke = additionalJokes[jokesIndex];
        jokesIndex = (jokesIndex + 1) % additionalJokes.length;
        printOutput(joke);
      } else if (command === 'who') {
        printOutput('Available names:');
        customNames.forEach(function (name, index) {
          printOutput(name + ': ' + customDescriptions[index]);
        });
      } else if (command.startsWith('ls')) {
        var subcommand = command.split(' ')[1];

        if (subcommand === 'pages') {
          printOutput('Custom page slugs:');
          customPageSlugs.forEach(function (slug) {
            printOutput(slug);
          });
        } else if (subcommand === 'who') {
          printOutput('Available names:');
          customAvailableNames.forEach(function (name) {
            printOutput(name);
          });
        } else {
          printOutput('Invalid subcommand for ls');
        }
      } else {
        if (!command.endsWith(userInputEndsWith)) {
          printOutput(plainTextError);
        } else if (!allowedCommands.includes(command)) {
          printOutput('Command not allowed');
        } else {
          printOutput('Executing command: ' + command);
        }
      }
    }

    terminalInput.addEventListener('keydown', function (event) {
      if (event.key === 'ArrowUp') {
        if (currentCommandIndex > 0) {
          currentCommandIndex--;
          terminalInput.value = commandsHistory[currentCommandIndex];
        }
        event.preventDefault();
      } else if (event.key === 'ArrowDown') {
        if (currentCommandIndex < commandsHistory.length - 1) {
          currentCommandIndex++;
          terminalInput.value = commandsHistory[currentCommandIndex];
        } else {
          terminalInput.value = '';
        }
        event.preventDefault();
      } else if (event.key === 'Enter') {
        processCommand();
        event.preventDefault();
      }
    });

    terminalInput.focus();
  </script>
</body>
</html>`;

      var generatedCode = codeTemplate
        .replace(/\${pageTitle}/g, document.title)
        .replace(/\${userInputEndsWith}/g, userInputEndsWith)
        .replace(/\${allowedCommands}/g, JSON.stringify(allowedCommands))
        .replace(/\${plainTextError}/g, plainTextError)
        .replace(/\${additionalJokes}/g, JSON.stringify(additionalJokes))
        .replace(/\${customNames}/g, JSON.stringify(customNames))
        .replace(/\${customDescriptions}/g, JSON.stringify(customDescriptions))
        .replace(/\${customPageSlugs}/g, JSON.stringify(customPageSlugs))
        .replace(/\${customAvailableNames}/g, JSON.stringify(customAvailableNames));

      document.getElementById('generated-code').value = generatedCode;
    }
  </script>
</body>

</html>
